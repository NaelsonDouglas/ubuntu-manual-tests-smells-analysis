<p>
This test case imports a WSL image from a rootfs and runs it.</p>
<p><br/>

</p>
<p><i>It requires a
working Microsoft Windows 10 or higher installation with WSL2
enabled. Installing Windows and enabling WSL 2 is outside of the
scope of this
 test case.
</i></p>
<p><i>
</i></p>
<ul>
	<li><p>Download the
	image from <a href="http://cloud-images.ubuntu.com/">http://cloud-images.ubuntu.com/</a>
		</p>
	<li><p>For example for
	latest focal image download:
</p>
	<ul>
		<li><p><a href="http://cloud-images.ubuntu.com/focal/current/focal-server-cloudimg-amd64-wsl.rootfs.tar.gz">http://cloud-images.ubuntu.com/focal/current/focal-server-cloudimg-amd64-wsl.rootfs.tar.gz</a>
				</p>
	</ul>
</ul>
<p>
</p>
<ul>
	<li><p>Open Windows
	Terminal or PowerShell
</p>
	<li><p>Import the
	image in WSL
</p>
</ul>
<p><font face="Mono">&gt;
wsl.exe --import &lt;name of the distro&gt; &lt;location to unpack
rootfs&gt; &lt;rootfs&gt; [--version &lt;version of WSL&gt;]
</font></p>
<p>
</p>
<ul>
	<ul>
		<li><p>For example:
</p>
	</ul>
</ul>
<p><font face="Mono">&gt;
wsl.exe --import Ubuntu20.04.3 .\wsl\
.\Downloads\focal-server-cloudimg-amd64-wsl.rootfs.tar.gz --version
2
</font></p>
<p>
</p>
<ul>
	<li><p>Verify that the
	image has been imported by running the following command:
</p>
</ul>
<p> <font face="Mono">wsl.exe
--list --all --verbose
</font></p>
<p>  <font face="Mono">NAME
             STATE           VERSION
</font></p>
<p><font face="Mono">*
Ubuntu            Running         2
</font></p>
<p>  <font face="Mono">Ubuntu20.04.3
    Stopped         2
</font></p>
<p>  <font face="Mono">Ubuntu-Preview
   Stopped         2
</font></p>
<p>  <font face="Mono">Ubuntu-20.04
     Stopped         2
</font></p>
<p>  <font face="Mono">TestUbuntuWSL
    Stopped         2
</font></p>
<p><font face="Mono">
</font></p>
<ul>
	<li><p>Check the the
	name used in previous command appears in the list.
</p>
</ul>
<p>
</p>
<ul>
	<li><p>Launch the
	newly installed application
</p>
</ul>
<p> <font face="Mono">&gt;
wsl -d Ubuntu20.04.3
</font></p>
<p><font face="Mono">
</font></p>
<ul>
	<li><p>Verify that
	you're inside the WSL instance and running the right distribution.
	For example run:
</p>
</ul>
<p><font face="Mono">#
lsb_release -a
</font></p>
<p><font face="Mono">No
LSB modules are available.
</font></p>
<p><font face="Mono">Distributor
ID: Ubuntu
</font></p>
<p><font face="Mono">Description:
   Ubuntu 20.04.3 LTS
</font></p>
<p><font face="Mono">Release:
       20.04
</font></p>
<p><font face="Mono">Codename:
      focal
</font></p>
<p>
</p>
<ul>
	<li><p>Since the image
	has been installed directly and not with the distro launcher, you're
	logged in a root by default and have to create a first user
	manually.
</p>
</ul>
<p>
</p>
<p><font face="Mono">#
adduser ubuntu
</font></p>
<p><font face="Mono">Adding
user `ubuntu' ...
</font></p>
<p><font face="Mono">Adding
new group `ubuntu' (1000) ...
</font></p>
<p><font face="Mono">Adding
new user `ubuntu' (1000) with group `ubuntu' ...
</font></p>
<p><font face="Mono">Creating
home directory `/home/ubuntu' ...
</font></p>
<p><font face="Mono">Copying
files from `/etc/skel' ...
</font></p>
<p><font face="Mono">New
password:
</font></p>
<p><font face="Mono">Retype
new password:
</font></p>
<p><font face="Mono">passwd:
password updated successfully
</font></p>
<p><font face="Mono">Changing
the user information for ubuntu
</font></p>
<p><font face="Mono">Enter
the new value, or press ENTER for the default
</font></p>
<p>        <font face="Mono">Full
Name []:
</font></p>
<p>        <font face="Mono">Room
Number []:
</font></p>
<p>        <font face="Mono">Work
Phone []:
</font></p>
<p>        <font face="Mono">Home
Phone []:
</font></p>
<p>        <font face="Mono">Other
[]:
</font></p>
<p><font face="Mono">Is
the information correct? [Y/n]
</font></p>
<p><font face="Mono">
</font></p>
<ul>
	<li><p>Add the newly
	created user to the sudo group
</p>
</ul>
<p><font face="Mono">#
usermod -aG sudo ubuntu
</font></p>
<p><font face="Mono">
</font></p>
<ul>
	<li><p>Verify that you
	can switch to the new user
</p>
</ul>
<p><font face="Mono">#
su ubuntu
</font></p>
<p><font face="Mono">To
run a command as administrator (user &quot;root&quot;), use &quot;sudo
&lt;command&gt;&quot;.
</font></p>
<p><font face="Mono">See
&quot;man sudo_root&quot; for details.
</font></p>
<p><font face="Mono">
</font></p>
<p><font face="Mono">$
whoami
</font></p>
<p><font face="Mono">ubuntu
</font></p>
<p><font face="Mono">
</font></p>
<ul>
	<li><p>Exit WSL. Type
	CTRL+D twice until you're back to the PowerShell prompt
</p>
</ul>
<p>
</p>
<ul>
	<li><p>Start a WSL
	session directly with the newly created user.
</p>
</ul>
<p><font face="Mono">&gt;
wsl -d Ubuntu20.04.3 -u ubuntu
</font></p>
<p><font face="Mono">To
run a command as administrator (user &quot;root&quot;), use &quot;sudo
&lt;command&gt;&quot;.
</font></p>
<p><font face="Mono">See
&quot;man sudo_root&quot; for details.
</font></p>
<p><font face="Mono">
</font></p>
<p><font face="Mono">Welcome
to Ubuntu 20.04.3 LTS (GNU/Linux 5.10.43.3-microsoft-standard-WSL2
x86_64)
</font></p>
<p><font face="Mono">
</font></p>
<p> <font face="Mono">*
Documentation:  https://help.ubuntu.com
</font></p>
<p> <font face="Mono">*
Management:     https://landscape.canonical.com
</font></p>
<p> <font face="Mono">*
Support:        https://ubuntu.com/advantage
</font></p>
<p><font face="Mono">
</font></p>
<p>  <font face="Mono">System
information as of Mon Aug 23 03:31:35 PDT 2021
</font></p>
<p><font face="Mono">
</font></p>
<p>  <font face="Mono">System
load:  0.16               Processes:             8
</font></p>
<p>  <font face="Mono">Usage
of /:   0.5% of 250.98GB   Users logged in:       0
</font></p>
<p>  <font face="Mono">Memory
usage: 6%                 IPv4 address for eth0: 172.30.131.4
</font></p>
<p>  <font face="Mono">Swap
usage:   0%
</font></p>
<p><font face="Mono">
</font></p>
<p><font face="Mono">
</font></p>
<p><font face="Mono">1
update can be applied immediately.
</font></p>
<p><font face="Mono">To
see these additional updates run: apt list --upgradable
</font></p>
<p><font face="Mono">
</font></p>
<p><font face="Mono">
</font></p>
<p><font face="Mono">
</font></p>
<p><font face="Mono">This
message is shown once a day. To disable it please create the
</font></p>
<p><font face="Mono">/home/ubuntu/.hushlogin
file.
</font></p>
<p><font face="Mono">ubuntu@WSL:/mnt/c/Users/ubuntu$
</font></p>
<p><font face="Mono">
</font></p>
<ul>
	<li><p>Run a command
	as root with sudo, for instance
</p>
</ul>
<p><font face="Mono">$
sudo apt update
</font></p>
<p><font face="Mono">
</font></p>
<ul>
	<li><p>Verify that the
	command ends successfully
</p>
</ul>
<ul>
	<li><p>Apply any
	update 
</p>
</ul>
<p><font face="Mono">$
sudo apt full-upgrade
</font></p>
<p><font face="Mono">
</font></p>
<ul>
	<li><p>Verify that the
	command ends successfully
</p>
	<li><p>
Install a
	package
</p>
</ul>
<p><font face="Mono">$
sudo apt install hello</font>
</p>
<p>
</p>
<ul>
	<li><p>Verify that the
	package has been successfully installed and the application can run
</p>
</ul>
<p><font face="Mono">$
hello
</font></p>
<p><font face="Mono">Hello,
world!
</font></p>
<p><font face="Mono">
</font></p>
<ul>
	<li><p>Install a
	graphical application
</p>
</ul>
<p><font face="Mono">$
sudo apt install xcalc
</font></p>
<p><font face="Mono">[...]
</font></p>
<p><font face="Mono">$
xcalc
</font></p>
<p><font face="Mono">(Wait
a moment until the application starts and is displayed)
</font></p>
<p><font face="Mono">
</font></p>
<ul>
	<li><p>Exit WSL
</p>
</ul>
<p><font face="Mono">$
logout
</font></p>
<p><font face="Mono">
</font></p>
<ul>
	<li><p>Check that your
	back to the PowerShell prompt
</p>
</ul>
<p>
</p>
<ul>
	<li><p>Uninstall the
	application
</p>
</ul>
<p><font face="Mono">&gt;
wsl.exe --unregister Ubuntu20.04.3
</font></p>
<p><br/>

</p>
<ul>
	<li><p>The application
	is no longer listed
</p>
</ul>
<p><font face="Mono">&gt;
wsl --list
</font></p>
<p><font face="Mono">Windows
Subsystem for Linux Distributions:
</font></p>
<p><font face="Mono">Ubuntu
(Default)
</font></p>
<p><font face="Mono">Ubuntu-Preview
</font></p>
<p><font face="Mono">Ubuntu-20.04
</font></p>
<p><font face="Mono">TestUbuntuWSL
</font></p>
<p><font face="Mono">
</font></p>
<ul>
	<li><p>And the
	directory is empty 
</p>
</ul>
<p>&gt; ls .\wsl
</p>
<p>&gt;</p>
